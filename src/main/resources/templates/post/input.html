<!DOCTYPE html>
<html lang="ko" 
    xmlns:th="http://www.thymeleaf.org" 
    xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
    layout:decorate="~{layout/default.html}">
    	
    	<section layout:fragment="contents" class="contents d-flex justify-content-center">
	    	<div class="contents-box my-5">
		    	<h2 class="text-center">메모 입력</h2>
		    	<input id="title" type="text" class="form-control mt-4" placeholder="제목을 입력해주세요">
		    	<textarea id="contents" class="form-control mt-3" rows=10></textarea>
		    	<input type="file" class="mt-3">
		    	
		    	<div class="d-flex justify-content-between mt-3">
		    		<a href="/post/list-view" class="btn btn-secondary">목록으로</a>
		    		<button id="saveBtn" type="button" class="btn btn-secondary">저장</button>
		    	</div>
	    	</div>
    	</section>
    	
    	<script layout:fragment="script">
    		$(document).ready(function(){
    			$("#saveBtn").on("click", function(){
    				let title = $("#title").val();
    				let contents = $("#contents").val();
    				
    				if(title.length == 0){
    					alert("제목을 입력해주세요");
    					return false;
    				}
    				
    				if(contents.length == 0){
    					alert("내용을 입력해주세요");
    					return false;
    				}
    				
    				$.ajax({
    					type:"post"
    					,url:"/post/create"
    					,data:{
    						"title" : title
    						,"contents" : contents
    					}
    					,success(response){
    						if(response.result == "success"){
    							alert("저장완료");
    							location.href="/post/list-view";
    						}else{
    							alert("저장중 에러");
    						}
    					}
    					,error(){
    						alert("에러");
    					}
    				});
    			});
    		});
    	</script>
</html>